<?php

return <<<'VALUE'
"namespace IPS\\Theme;\nclass class_nexus_front_support extends \\IPS\\Theme\\Template\n{\n\tpublic $cache_key = '3dacef5fddab929d92bff01b2d956308';\n\tfunction create( $form ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->pageHeader( \\IPS\\Member::loggedIn()->language()->addToStack('create_new_request') );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<div class='ipsBox ipsPad'>\n\t\t{$form}\n\t<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction pendingDone( $message ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class=\"ipsPad\">\n\t<div class=\"ipsMessage ipsMessage_success\">\nCONTENT;\n\n$val = \"{$message}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction ratingValue( $comment ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( !$comment->ratingData['rating_rating'] ):\n$return .= <<<CONTENT\n\n\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $comment->url()->setQueryString( array( 'response' => $comment->id, 'do' => 'rate' ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsPos_right' data-ipsDialog data-ipsDialog-remoteSubmit data-ipsDialog-flashMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'thanks_for_your_feedback', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsDialog-size='narrow' data-ipsDialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'rate_this_response', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'rate_this_response', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a>\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<div class='ipsType_reset ipsType_light ipsPos_right'>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'you_rated_response', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t<ul class='ipsList_inline ipsRating'>\n\t\t\t\nCONTENT;\n\nforeach ( range( 1, 5 ) as $i ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class='\nCONTENT;\n\nif ( $i <= $comment->ratingData['rating_rating'] ):\n$return .= <<<CONTENT\nipsRating_on\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nipsRating_off\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'><i class='fa fa-star'><\/i><\/li>\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction replyContainer( $item, $comment ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\n$idField = $comment::$databaseColumnId;\n$return .= <<<CONTENT\n\n<div class='ipsBox ipsSpacer_bottom cNexusSupportMessage cNexusSupportMessage_\nCONTENT;\n$return .= htmlspecialchars( $comment->type, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n ipsComment ipsComment_parent' data-commentApp='nexus' data-commentType='support' data-commentID=\"\nCONTENT;\n$return .= htmlspecialchars( $comment->$idField, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t<div class=\"ipsColumns ipsColumns_collapsePhone\">\n\t\t<div class='ipsColumn ipsColumn_medium ipsType_center cNexusSupportMessage_author'>\n\t\t\t<div class='ipsPad'>\n\t\t\t\t\nCONTENT;\n\nif ( $comment->author() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $comment->author(), 'small' );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<i class='fa fa-envelope'><\/i>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\t\t<br class='ipsSpacer_bottom'><br>\n\n\t\t\t\t\nCONTENT;\n\nif ( $comment->type === $comment::REPLY_EMAIL ):\n$return .= <<<CONTENT\n\n\t\t\t\t\tBy Email\n\t\t\t\t\nCONTENT;\n\nelseif ( $comment->type === $comment::REPLY_MEMBER or $comment->type === $comment::REPLY_ALTCONTACT ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( $comment->author()->member_id === \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<h3 class='ipsType_sectionHead ipsType_blendLinks'><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'you', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/h3>\n\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<h3 class='ipsType_sectionHead ipsType_blendLinks'><strong><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $comment->author()->acpUrl(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= htmlspecialchars( $comment->author()->cm_name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a><\/strong><\/h3>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<h3 class='ipsType_sectionHead ipsType_blendLinks'><strong>\nCONTENT;\n$return .= htmlspecialchars( $comment->author()->cm_name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/strong><\/h3>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\t\t\nCONTENT;\n\nif ( $comment->type === $comment::REPLY_MEMBER ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<p class='ipsType_medium ipsType_reset'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'reply_by__accountowner', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t\t\t\t\nCONTENT;\n\nelseif ( $comment->type === $comment::REPLY_ALTCONTACT ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<p class='ipsType_medium ipsType_reset'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'reply_by__altcontact', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t\t\t\t\nCONTENT;\n\nelseif ( $comment->type === $comment::REPLY_STAFF ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<p class='ipsType_medium ipsType_reset'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'reply_by__staff', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<div class='ipsColumn ipsColumn_fluid cNexusSupportMessage_message'>\n\t\t\t<div class='ipsPad'>\n\t\t\t\t<div class='cNexusSupportMessage_date ipsType_medium'>\n\t\t\t\t\t\nCONTENT;\n\nif ( $comment->type === $comment::REPLY_STAFF and \\IPS\\Settings::i()->nexus_support_satisfaction ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div data-controller='nexus.front.support.rate'>\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"support\", \\IPS\\Request::i()->app )->ratingValue( $comment );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<p class='ipsType_reset ipsType_light'>\n\t\t\t\t\t\t\nCONTENT;\n\n$val = ( $comment->date instanceof \\IPS\\DateTime ) ? $comment->date : \\IPS\\DateTime::ts( $comment->date );$return .= $val->html();\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $comment->cc ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<br><span class='ipsType_small'><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cc', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n:<\/strong> \nCONTENT;\n$return .= htmlspecialchars( $comment->cc, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $comment->bcc ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<br><span class='ipsType_small'><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'bcc', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n:<\/strong> \nCONTENT;\n$return .= htmlspecialchars( $comment->bcc, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/p>\n\t\t\t\t<\/div>\n\t\t\t\t<hr class='ipsHr'>\n\t\t\t\t<div class='ipsType_richText ipsType_normal ipsContained ipsType_break'>\n\t\t\t\t\t{$comment->content()}\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction request( $request ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div class='ipsColumns ipsColumns_collapsePhone'>\n\t<div class='ipsColumn ipsColumn_fluid'>\n\t\t<div class='ipsPageHeader'>\n\t\t\t<h1 class='ipsType_pageTitle ipsType_largeTitle ipsType_break'>\nCONTENT;\n$return .= htmlspecialchars( $request->title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n &nbsp;<span class='ipsType_large ipsType_light ipsType_unbold'>#\nCONTENT;\n$return .= htmlspecialchars( $request->id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span><\/h1>\n\t\t<\/div>\n\t\t<div class='ipsBox ipsPad ipsSpacer_top'>\n\t\t\t<div class='ipsGrid ipsGrid_collapsePhone ipsType_normal'>\n\t\t\t\t<div class='ipsGrid_span4'>\n\t\t\t\t\t<h3 class='ipsType_sectionHead'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'status', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3><br>\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"support\", \\IPS\\Request::i()->app, 'admin' )->status( $request->status );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\n\t\t\t\t\t\nCONTENT;\n\nif ( $setStatuses = \\IPS\\nexus\\Support\\Status::publicSetStatuses( $request ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t&nbsp;&nbsp;\n\t\t\t\t\t\t<a href='#elStatusMenu_menu' class='ipsType_small' data-ipsMenu id='elStatusMenu'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'change', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a>\n\t\t\t\t\t\t<ul class='ipsHide ipsMenu ipsMenu_auto' id='elStatusMenu_menu'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $setStatuses as $id => $set ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class='ipsMenu_item'>\n\t\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $request->url()->setQueryString( 'setStatus', $id )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= htmlspecialchars( $set, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->nexus_severities ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div class='ipsGrid_span4'>\n\t\t\t\t\t\t<h3 class='ipsType_sectionHead'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'r_severity', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3><br>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"support\", \\IPS\\Request::i()->app, 'admin' )->severity( $request->severity );\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( !\\IPS\\Member::loggedIn()->cm_no_sev and count( \\IPS\\nexus\\Support\\Severity::roots( NULL, NULL, array( array( 'sev_public=1' ), array( \"sev_departments='*' OR \" . \\IPS\\Db::i()->findInSet( 'sev_departments', array( $request->department->id ) ) ) ) ) ) > 1 ):\n$return .= <<<CONTENT\n<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $request->url('severity'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsDialog data-ipsDialog-size='narrow' data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'change_severity', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'change', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<div class='ipsGrid_span4'>\n\t\t\t\t\t<h3 class='ipsType_sectionHead'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'department', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3><br>\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"support\", \\IPS\\Request::i()->app, 'admin' )->department( $request->department );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nif ( $customFields = $request->department->customFields() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$customFieldValues = $request->cfields;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $customFields as $field ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( $customFieldValues[ $field->id ] ) and $customFieldValues[ $field->id ] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<div class='ipsGrid_span4 ipsSpacer_top'>\n\t\t\t\t\t\t\t\t<h3 class='ipsType_sectionHead'>\nCONTENT;\n$return .= htmlspecialchars( $field->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/h3><br>\n\t\t\t\t\t\t\t\t{$field->displayValue( $customFieldValues[ $field->id ] )}\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\n\t\t\t\nCONTENT;\n\nif ( $request->purchase ):\n$return .= <<<CONTENT\n\n\t\t\t\t<hr class='ipsHr'>\n\t\t\t\t<div class='cNexusSupportMessage_purchase'>\n\t\t\t\t\t<div class='ipsColumns ipsColumns_collapsePhone'>\n\t\t\t\t\t\t<div class='ipsColumn ipsColumn_narrow'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $image = $request->purchase->image() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<span class='cNexusPurchase_image ipsThumb ipsThumb_small' style='background-image: url( \"\nCONTENT;\n\n$return .= htmlspecialchars( str_replace( array( '(', ')' ), array( '\\(', '\\)' ), $image->url ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" );'>&nbsp;<\/span>\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<span class='ipsThumb ipsThumb_small ipsNoThumb \nCONTENT;\n\nif ( $request->purchase->type == 'giftvoucher' ):\n$return .= <<<CONTENT\nipsNoThumb_gift\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nipsNoThumb_product\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>&nbsp;<\/span>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class='ipsColumn ipsColumn_fluid'>\n\t\t\t\t\t\t\t<h3 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'request_is_for', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t\t\t<span class='ipsType_sectionHead'>\nCONTENT;\n$return .= htmlspecialchars( $request->purchase->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t<ul class='ipsList_inline ipsType_normal ipsSpacer_top ipsSpacer_half'>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'ps_start', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n:<\/strong> \nCONTENT;\n$return .= htmlspecialchars( $request->purchase->start->localeDate(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $request->purchase->expire ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'ps_expire', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n:<\/strong> \nCONTENT;\n$return .= htmlspecialchars( $request->purchase->expire->localeDate(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\n\t\t<div class='ipsSpacer_top ipsBox' data-controller='core.front.core.commentFeed' data-baseURL='\nCONTENT;\n$return .= htmlspecialchars( $request->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-feedID='messages-\nCONTENT;\n$return .= htmlspecialchars( $request->id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t<h2 class='ipsType_sectionTitle ipsType_reset'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'support_responses', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\nCONTENT;\n\nif ( $request->commentPageCount() > 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t<div class='ipsButtonBar ipsPad_half ipsClearfix ipsClear'>\n\t\t\t\t\t{$request->commentPagination()}\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsAreaBackground_light ipsPad'>\n\t\t\t\t<div data-role='commentFeed'>\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $request->comments( NULL, NULL, 'date', 'asc', NULL, FALSE ) as $reply ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<a name='comment-\nCONTENT;\n$return .= htmlspecialchars( $reply->id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><\/a>\n\t\t\t\t\t\t{$reply->html()}\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nif ( $request->commentPageCount() > 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t{$request->commentPagination()}\n\t\t\t\t\t<br><br>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $request->canComment() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div class='ipsBox ipsBox_transparent ipsAreaBackground ipsPad cNexusSupportMessage_replyArea' data-role='replyArea'>\n\t\t\t\t\t\t<h3 class='ipsType_sectionHead ipsSpacer_bottom'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'respond_to_ticket', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t\t{$request->commentForm()}\n\t\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction requestList( $table ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->pageHeader( \\IPS\\Member::loggedIn()->language()->addToStack('your_support_requests') );\n$return .= <<<CONTENT\n\n\n<ul class=\"ipsToolList ipsToolList_horizontal ipsClearfix ipsSpacer_bottom\">\n\t<li class='ipsToolList_primaryAction'>\n\t\t<a class=\"ipsButton ipsButton_medium ipsButton_important ipsButton_fullWidth\" href=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=nexus&module=support&controller=home&do=create\", null, \"support_create\", array(), 0 ) );\n$return .= <<<CONTENT\n\" data-ipsDialog data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'new_request', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'new_request', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t<\/li>\n<\/ul>\n\n<div class='ipsBox'>\n\t<h2 class='ipsType_sectionTitle ipsType_reset'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'your_support_requests', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t{$table}\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction tableRows( $table, $headers, $rows ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nforeach ( $rows as $row ):\n$return .= <<<CONTENT\n\n\t<li class=\"ipsDataItem \nCONTENT;\n\nif ( $row->unread() ):\n$return .= <<<CONTENT\nipsDataItem_unread\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t<div class='ipsDataItem_generic ipsDataItem_size3 ipsPos_top ipsType_center'>\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( \\IPS\\Member::load( $row->last_reply_by ), 'small' );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\t<div class='ipsDataItem_main'>\n\t\t\t<h4 class='ipsDataItem_title ipsType_sectionHead'>\n\t\t\t\t\nCONTENT;\n\nif ( $row->unread() ):\n$return .= <<<CONTENT\n<span class='ipsItemStatus'><a href='\nCONTENT;\n$return .= htmlspecialchars( $row->url( 'getNewComment' ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><i class=\"fa fa-circle\"><\/i><\/a><\/span>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlspecialchars( $row->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\nif ( $row->mapped('title') ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $row->mapped('title'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n<em class=\"ipsType_light\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'content_deleted', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/em>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/a> <span class='ipsType_light ipsType_unbold ipsType_normal'>#\nCONTENT;\n$return .= htmlspecialchars( $row->id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<\/h4>\n\t\t\t<div class='ipsDataItem_meta ipsType_light'>\n\t\t\t\t<ul class='ipsList_inline ipsSpacer_top ipsSpacer_half'>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"support\", \\IPS\\Request::i()->app, 'admin' )->status( $row->status );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'in', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <strong>\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"support\", \\IPS\\Request::i()->app, 'admin' )->department( $row->department );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t<\/li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<i class='fa fa-clock-o'><\/i>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $row->replies == 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row->last_reply_by === \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array(\\IPS\\DateTime::ts( $row->last_reply )->relative()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'support_you_created', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array(\\IPS\\Member::load( $row->last_reply_by )->name, \\IPS\\DateTime::ts( $row->last_reply )->relative()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'support_x_created', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row->last_reply_by === \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array(\\IPS\\DateTime::ts( $row->last_reply )->relative()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'support_you_replied', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array(\\IPS\\Member::load( $row->last_reply_by )->name, \\IPS\\DateTime::ts( $row->last_reply )->relative()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'support_x_replied', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/li>\n\t\t\t\t<\/ul>\n\t\t\t<\/div>\n\t\t\t<div class='ipsType_break ipsContained ipsType_medium ipsSpacer_top ipsSpacer_half' data-ipsTruncate data-ipsTruncate-size='2 lines' data-ipsTruncate-type='remove'>\n\t\t\t\t{$row->truncated()}\n\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nif ( $row->purchase ):\n$return .= <<<CONTENT\n\n\t\t\t\t<p class='ipsType_reset ipsType_medium ipsType_light ipsSpacer_top ipsSpacer_half ipsType_blendLinks'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'request_is_for', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <strong>\nCONTENT;\n$return .= htmlspecialchars( $row->purchase->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/strong><\/p>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\t<div class='ipsDataItem_generic ipsDataItem_size2 ipsType_right ipsPos_top'>\n\t\t\t<span class='ipsCommentCount'>\nCONTENT;\n$return .= htmlspecialchars( $row->replies, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t<\/div>\n\t<\/li>\n\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}}"
VALUE;
