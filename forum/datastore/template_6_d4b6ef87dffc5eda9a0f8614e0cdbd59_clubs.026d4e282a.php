<?php

return <<<'VALUE'
"namespace IPS\\Theme;\nclass class_core_front_clubs extends \\IPS\\Theme\\Template\n{\n\tpublic $cache_key = '12d8d0d9b3e0de4fe9d291c74ec152b3';\n\tfunction clubCard( $club, $approvalQueue=FALSE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\n$coverPhoto = $club->coverPhoto( FALSE );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\n$memberStatus = $club->memberStatus( \\IPS\\Member::loggedIn() );\n$return .= <<<CONTENT\n\n\n<div class=\"cClubCard \nCONTENT;\n\nif ( \\IPS\\Settings::i()->clubs_require_approval and !$club->approved ):\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $approvalQueue ):\n$return .= <<<CONTENT\nipsBox\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nipsModerated\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nif ( $approvalQueue ):\n$return .= <<<CONTENT\nid=\"elApprovePanel\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\nCONTENT;\n\nif ( in_array( $memberStatus, array( $club::STATUS_MEMBER, $club::STATUS_MODERATOR, $club::STATUS_LEADER ) ) ):\n$return .= <<<CONTENT\n\n\t\t<span class='ipsBadge ipsBadge_positive ipsBadge_icon ipsBadge_large cClubCard_status' data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_member', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-check'><\/i><\/span>\n\t\nCONTENT;\n\nelseif ( in_array( $memberStatus, array( $club::STATUS_EXPIRED, $club::STATUS_EXPIRED_MODERATOR ) ) ):\n$return .= <<<CONTENT\n\n\t\t<span class='ipsBadge ipsBadge_intermediary ipsBadge_icon ipsBadge_large cClubCard_status' data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_expired', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-exclamation-triangle'><\/i><\/span>\n\t\nCONTENT;\n\nelseif ( $memberStatus == $club::STATUS_INVITED or $memberStatus == $club::STATUS_INVITED_BYPASSING_PAYMENT ):\n$return .= <<<CONTENT\n\n\t\t<span class='ipsBadge ipsBadge_neutral ipsBadge_icon ipsBadge_large cClubCard_status' data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_invited', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-envelope'><\/i><\/span>\n\t\nCONTENT;\n\nelseif ( $memberStatus == $club::STATUS_REQUESTED ):\n$return .= <<<CONTENT\n\n\t\t<span class='ipsBadge ipsBadge_intermediary ipsBadge_icon ipsBadge_large cClubCard_status' data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_requested_desc_short', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-clock-o'><\/i><\/span>\n\t\nCONTENT;\n\nelseif ( $memberStatus == $club::STATUS_WAITING_PAYMENT ):\n$return .= <<<CONTENT\n\n\t\t<span class='ipsBadge ipsBadge_neutral ipsBadge_icon ipsBadge_large cClubCard_status' data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_awaiting_payment_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-check'><\/i><\/span>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t<div class='ipsPageHead_special' data-controller='core.global.core.coverPhoto' data-url=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-coverOffset='\nCONTENT;\n$return .= htmlspecialchars( $coverPhoto->offset, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\nCONTENT;\n\n$cfObject = $coverPhoto->object;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $coverPhoto->file ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsCoverPhoto_container'>\n\t\t\t\t<img src='\nCONTENT;\n$return .= htmlspecialchars( $coverPhoto->file->url, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsCoverPhoto_photo' alt='\nCONTENT;\n$return .= htmlspecialchars( $club->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nelseif ( ! empty( $cfObject::$coverPhotoDefault ) ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsCoverPhoto_container' style=\"background-color: \nCONTENT;\n$return .= htmlspecialchars( $coverPhoto->object->coverPhotoBackgroundColor(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t<img src='\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->resource( \"pattern.png\", \"core\", 'global', false );\n$return .= <<<CONTENT\n' class='ipsCoverPhoto_photo' data-action=\"toggleCoverPhoto\" alt=''>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->clubIcon( $club, 'medium' );\n$return .= <<<CONTENT\n\n\t\t<h2 class=\"ipsType_reset cClubCard_title ipsType_blendLinks\">\n\t\t\t<span class='ipsPageHead_barText_small ipsTruncate ipsTruncate_line'>\n\t\t\t\t\nCONTENT;\n\nif ( !$approvalQueue and \\IPS\\Settings::i()->clubs_require_approval and !$club->approved ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span class=\"ipsBadge ipsBadge_small ipsBadge_icon ipsBadge_warning\" data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_unapproved', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-eye-slash'><\/i><\/span>\n\t\t\t\t\nCONTENT;\n\nelseif ( $club->featured ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span class=\"ipsBadge ipsBadge_small ipsBadge_icon ipsBadge_positive\" data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'featured', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-star'><\/i><\/span>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' title=\"\nCONTENT;\n$return .= htmlspecialchars( $club->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= htmlspecialchars( $club->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/span>\n\t\t<\/h2>\n\t<\/div>\n\n\t<p class='ipsType_reset ipsType_light ipsType_medium cClubCard_info'>\n\t\t\nCONTENT;\n\n$val = \"club_{$club->type}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $club->type !== $club::TYPE_PUBLIC ):\n$return .= <<<CONTENT\n\n\t\t\t&nbsp;&middot;&nbsp;\n\t\t\t\nCONTENT;\n\n$pluralize = array( $club->members ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_members_count', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $club->last_activity ):\n$return .= <<<CONTENT\n\n\t\t\t&nbsp;&middot;&nbsp;\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_last_activity', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n \nCONTENT;\n\n$val = ( $club->last_activity instanceof \\IPS\\DateTime ) ? $club->last_activity : \\IPS\\DateTime::ts( $club->last_activity );$return .= $val->html();\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( ( in_array( $club->type, array( $club::TYPE_OPEN, $club::TYPE_CLOSED ) ) or in_array( $memberStatus, array( $club::STATUS_MEMBER, $club::STATUS_MODERATOR, $club::STATUS_LEADER, $club::STATUS_INVITED, $club::STATUS_INVITED_BYPASSING_PAYMENT, $club::STATUS_REQUESTED, $club::STATUS_EXPIRED, $club::STATUS_EXPIRED_MODERATOR ) ) ) and $priceBlurb = $club->priceBlurb() ):\n$return .= <<<CONTENT\n\n\t\t\t<br>\n\t\t\t<span class=\"cClubPrice ipsType_medium\">\nCONTENT;\n$return .= htmlspecialchars( $priceBlurb, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/p>\n\n\t<div class='ipsPad'>\n\t\t\nCONTENT;\n\nif ( $club->about ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsType_richText ipsType_medium' data-ipsTruncate data-ipsTruncate-type='remove' data-ipsTruncate-size='2 lines'>\n\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $club->about, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsType_light ipsType_medium'>\n\t\t\t\t<em>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_no_about', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/em>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\n\t\t\nCONTENT;\n\nif ( $club->type != $club::TYPE_PUBLIC ):\n$return .= <<<CONTENT\n\n\t\t\t<hr class='ipsHr ipsHr_small'>\n\t\n\t\t\t<ul class='cClubCard_memberList ipsList_inline ipsList_noSpacing'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $club->randomTenMembers() as $member ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhotoFromData( $member['core_members']['member_id'], $member['core_members']['name'], $member['core_members']['members_seo_name'], \\IPS\\Member::photoUrl( $member['core_members'] ), 'tiny' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\n\t\t\t\nCONTENT;\n\nif ( $club->canJoin() ):\n$return .= <<<CONTENT\n\n\t\t\t\t<hr class='ipsHr ipsHr_small'>\n\t\t\t\t<a class=\"ipsButton ipsButton_small ipsButton_primary ipsButton_fullWidth\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'join')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nif ( $club->isPaid() and $memberStatus !== $club::STATUS_INVITED_BYPASSING_PAYMENT ):\n$return .= <<<CONTENT\ndata-confirm data-confirmIcon=\"info\" data-confirmMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_membership_item', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-confirmSubmessage=\"\nCONTENT;\n$return .= htmlspecialchars( $club->memberFeeMessage(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_join', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction clubClientArea( $club ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class=\"ipsAreaBackground ipsPad\">\n\t<div class=\"ipsBox\">\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->clubCard( $club );\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction clubIcon( $club, $size='medium', $classes='' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<a href='\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsUserPhoto ipsUserPhoto_\nCONTENT;\n$return .= htmlspecialchars( $size, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n cClubIcon \nCONTENT;\n$return .= htmlspecialchars( $classes, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\nCONTENT;\n\nif ( $club->profile_photo ):\n$return .= <<<CONTENT\n\n\t\t<img src='\nCONTENT;\n\n$return .= \\IPS\\File::get( \"core_Clubs\", $club->profile_photo )->url;\n$return .= <<<CONTENT\n' alt='\nCONTENT;\n$return .= htmlspecialchars( $club->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<img src='\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->resource( \"default_club.png\", \"core\", 'global', false );\n$return .= <<<CONTENT\n' alt='\nCONTENT;\n$return .= htmlspecialchars( $club->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/a>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction clubRow( $club ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\n$memberStatus = $club->memberStatus( \\IPS\\Member::loggedIn() );\n$return .= <<<CONTENT\n\n<li class=\"ipsDataItem \nCONTENT;\n\nif ( \\IPS\\Settings::i()->clubs_require_approval and !$club->approved ):\n$return .= <<<CONTENT\nipsModerated\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t<div class='ipsDataItem_icon'>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->clubIcon( $club, 'tiny' );\n$return .= <<<CONTENT\n\n\t<\/div>\n\t<div class='ipsDataItem_main'>\n\t\t<h4 class='ipsDataItem_title ipsContained_container'>\n\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->clubs_require_approval and !$club->approved ):\n$return .= <<<CONTENT\n\n\t\t\t\t<span><span class=\"ipsBadge ipsBadge_small ipsBadge_icon ipsBadge_warning\" data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_unapproved', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-eye-slash'><\/i><\/span><\/span>\n\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $club->featured ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span><span class=\"ipsBadge ipsBadge_small ipsBadge_icon ipsBadge_positive\" data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'featured', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-star'><\/i><\/span><\/span>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( in_array( $memberStatus, array( $club::STATUS_MEMBER, $club::STATUS_MODERATOR, $club::STATUS_LEADER ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span><span class='ipsBadge ipsBadge_positive ipsBadge_icon ipsBadge_small' data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_member', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-check'><\/i><\/span><\/span>\n\t\t\t\t\nCONTENT;\n\nelseif ( in_array( $memberStatus, array( $club::STATUS_EXPIRED, $club::STATUS_EXPIRED_MODERATOR ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span><span class='ipsBadge ipsBadge_intermediary ipsBadge_icon ipsBadge_small' data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_expired', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-exclamation-triangle'><\/i><\/span><\/span>\n\t\t\t\t\nCONTENT;\n\nelseif ( $memberStatus == $club::STATUS_INVITED or $memberStatus == $club::STATUS_INVITED_BYPASSING_PAYMENT ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span><span class='ipsBadge ipsBadge_neutral ipsBadge_icon ipsBadge_small' data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_invited', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-envelope'><\/i><\/span><\/span>\n\t\t\t\t\nCONTENT;\n\nelseif ( $memberStatus == $club::STATUS_WAITING_PAYMENT ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span><span class='ipsBadge ipsBadge_neutral ipsBadge_icon ipsBadge_small' data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_awaiting_payment_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-check'><\/i><\/span><\/span>\n\t\t\t\t\nCONTENT;\n\nelseif ( $memberStatus == $club::STATUS_REQUESTED ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span><span class='ipsBadge ipsBadge_intermediary ipsBadge_icon ipsBadge_small' data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_requested_desc_short', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-clock-o'><\/i><\/span><\/span>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<span class='ipsType_break ipsContained'>\n\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' title=\"\nCONTENT;\n$return .= htmlspecialchars( $club->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= htmlspecialchars( $club->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/span>\n\t\t<\/h4>\n\t\t<div class='ipsDataItem_meta ipsType_reset ipsType_light ipsType_blendLinks ipsType_break ipsContained' data-ipsTruncate data-ipsTruncate-type='remove' data-ipsTruncate-size='1 lines'>\n\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $club->about, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t<\/div>\n\t<ul class='ipsDataItem_stats'>\n\t\t<li>\n\t\t\t\nCONTENT;\n\n$val = \"club_{$club->type}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t<\/li>\n\t\t\nCONTENT;\n\nif ( $club->type !== $club::TYPE_PUBLIC ):\n$return .= <<<CONTENT\n\n\t\t\t<li class=\"ipsType_light\">\n\t\t\t\t\nCONTENT;\n\n$pluralize = array( $club->members ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_members_count', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/ul>\n<\/li>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction coverPhotoOverlay( $club, $position='full' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( $position == 'full' ):\n$return .= <<<CONTENT\n\n\t<div class='ipsColumns ipsColumns_collapsePhone'>\n\t\t<div class='ipsColumn ipsColumn_fixed ipsColumn_narrow ipsPos_center'>\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->clubIcon( $club, 'medium', 'ipsResponsive_hidePhone' );\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( $club->isLeader() ):\n$return .= <<<CONTENT\n\n\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( 'do', 'editPhoto' ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_verySmall ipsButton_light ipsButton_narrow' data-action='editPhoto' data-ipsDialog data-ipsDialog-forceReload='true' data-ipsDialog-modal='true' data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_profile_photo', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_profile_photo', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsTooltip><i class='fa fa-photo'><\/i><\/a>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\t<div class='ipsColumn ipsColumn_fluid cClubHeaderInfo ipsTruncate'>\n\t\t\t<h2 class='ipsType_pageTitle ipsType_blendLinks ipsPageHead_barText'>\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->clubs_require_approval and !$club->approved ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span class=\"ipsBadge ipsBadge_small ipsBadge_icon ipsBadge_warning\" data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_unapproved', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-eye-slash'><\/i><\/span>\n\t\t\t\t\nCONTENT;\n\nelseif ( $club->featured ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span class=\"ipsBadge ipsBadge_icon ipsBadge_positive\" data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'featured', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-star'><\/i><\/span>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' title='\nCONTENT;\n$return .= htmlspecialchars( $club->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $club->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/h2>\n\t\t\t<br>\n\t\t\t<p class='ipsType_reset ipsType_normal ipsPageHead_barText_small'>\n\t\t\t\t\nCONTENT;\n\n$val = \"club_{$club->type}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $club->type !== $club::TYPE_PUBLIC ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t&nbsp;&middot;&nbsp;\n\t\t\t\t\t\nCONTENT;\n\n$pluralize = array( $club->members ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_members_count', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $club->isLeader() and $club->type === $club::TYPE_CLOSED and $pendingMembers = $club->members( array( $club::STATUS_REQUESTED ), NULL, NULL, 4 ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t&nbsp;&middot;&nbsp;\n\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'members')->setQueryString('filter', 'requested')->setQueryString('filter', 'requested'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsType_issue'><i class='fa fa-info-circle'><\/i> &nbsp;\nCONTENT;\n\n$pluralize = array( $pendingMembers ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_pending_members', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n<\/span><\/a>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( ( in_array( $club->type, array( $club::TYPE_OPEN, $club::TYPE_CLOSED ) ) or ( $memberStatus = $club->memberStatus( \\IPS\\Member::loggedIn() ) and in_array( $memberStatus, array( $club::STATUS_MEMBER, $club::STATUS_MODERATOR, $club::STATUS_LEADER, $club::STATUS_INVITED, $club::STATUS_INVITED_BYPASSING_PAYMENT, $club::STATUS_REQUESTED, $club::STATUS_EXPIRED, $club::STATUS_EXPIRED_MODERATOR ) ) ) ) and $priceBlurb = $club->priceBlurb() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t&nbsp;&middot;&nbsp;\n\t\t\t\t\t<span class=\"ipsType_medium\">\nCONTENT;\n$return .= htmlspecialchars( $priceBlurb, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/p>\n\t\t<\/div>\n\t<\/div>\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<div class='ipsPos_center ipsType_center'>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->clubIcon( $club, 'large' );\n$return .= <<<CONTENT\n\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction create( $form ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->pageHeader( \\IPS\\Member::loggedIn()->language()->get('create_club') );\n$return .= <<<CONTENT\n\n<div class='ipsBox ipsPad'>\n\t{$form}\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction directory( $featuredClubs, $allClubs, $pagination, $baseUrl, $sortOption, $myClubsActivity, $mapMarkers=NULL, $view='grid' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div class='ipsPageHeader ipsClearfix ipsSpacer_bottom'>\n\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->clubs_allow_view_change ):\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsPos_right\">\n\t\t\t<ul class=\"ipsButton_split\">\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=clubs&controller=directory&view=grid\", null, \"clubs_list\", array(), 0 ) );\n$return .= <<<CONTENT\n\" class=\"ipsButton \nCONTENT;\n\nif ( $view == 'grid' ):\n$return .= <<<CONTENT\nipsButton_primary\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nipsButton_link\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n ipsButton_narrow ipsButton_small\" data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_view_grid', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t<i class=\"fa fa-th-large\"><\/i>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=clubs&controller=directory&view=list\", null, \"clubs_list\", array(), 0 ) );\n$return .= <<<CONTENT\n\" class=\"ipsButton \nCONTENT;\n\nif ( $view == 'list' ):\n$return .= <<<CONTENT\nipsButton_primary\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nipsButton_link\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n ipsButton_narrow ipsButton_small\" data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_view_list', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t<i class=\"fa fa-align-justify\"><\/i>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\t\t\t\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<h1 class='ipsType_pageTitle'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_directory', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h1>\n<\/div>\n\n\nCONTENT;\n\nif ( count( $featuredClubs ) ):\n$return .= <<<CONTENT\n\n\t<div class=\"ipsBox ipsSpacer_bottom\">\n\t\t<h2 class=\"ipsType_sectionTitle ipsType_reset\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'featured_clubs', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\nCONTENT;\n\nif ( $view == 'grid' ):\n$return .= <<<CONTENT\n\n\t\t\t<div class=\"ipsAreaBackground ipsPad\">\n\t\t\t\t<ul class='ipsGrid ipsGrid_collapsePhone' data-ipsGrid data-ipsGrid-minItemSize='500' data-ipsGrid-maxItemSize='600' data-ipsGrid-equalHeights='row'>\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $featuredClubs as $club ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class='ipsGrid_span6 ipsBox'>\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->clubCard( $club );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/ul>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t<ol class=\"ipsDataList ipsDataList_zebra ipsAreaBackground_reset\">\n\t\t\t\t\nCONTENT;\n\nforeach ( $featuredClubs as $club ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->clubRow( $club );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ol>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( $mapMarkers !== NULL && \\IPS\\Settings::i()->clubs_locations ):\n$return .= <<<CONTENT\n\n\t<div class='ipsBox ipsSpacer_bottom'>\n\t\t<h2 class='ipsType_sectionTitle ipsType_reset'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_find_by_location', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t<div class='ipsPad_half'>\n\t\t\t<div data-ipsMap data-ipsMap-markers=\"\nCONTENT;\n\n$return .= htmlspecialchars( json_encode( $mapMarkers ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsMap-contentUrl=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=clubs&controller=view&do=mapPopup&id=\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" class=\"ipsMap ipsMap_small ipsJS_show\"><\/div>\n\t\t<\/div>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\n<div class=\"ipsBox\">\n\t<h2 class=\"ipsType_sectionTitle ipsType_reset\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'all_clubs', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\nCONTENT;\n\nif ( count( $allClubs ) ):\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t\t<ul class=\"ipsButtonRow ipsPos_right ipsClearfix\">\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"#elSortByMenu_menu\" id=\"elSortByMenu\" data-ipsMenu data-ipsMenu-activeClass=\"ipsButtonRow_active\" data-ipsMenu-selectable=\"radio\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'sort_by', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class=\"fa fa-caret-down\"><\/i><\/a>\n\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id or \\IPS\\Member\\Club\\CustomField::areFilterableFields() or ( \\IPS\\Application::appIsEnabled( 'nexus' ) and \\IPS\\Settings::i()->clubs_paid_on ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $baseUrl->setQueryString( 'do', 'filters' ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsDialog data-ipsDialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'filter', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'filter', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t\t{$pagination}\n\t\t\t<ul class=\"ipsMenu ipsMenu_auto ipsMenu_withStem ipsMenu_selectable ipsHide\" id=\"elSortByMenu_menu\">\n\t\t\t\t\nCONTENT;\n\nforeach ( array('last_activity', 'members', 'content', 'created', 'name') as $k ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class=\"ipsMenu_item \nCONTENT;\n\nif ( $k == $sortOption ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" data-ipsMenuValue=\"\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=clubs&controller=directory&sort={$k}\", null, \"clubs_list\", array(), 0 ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$val = \"clubs_sort_{$k}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\t\nCONTENT;\n\nif ( $view == 'grid' ):\n$return .= <<<CONTENT\n\n\t\t\t<div class=\"ipsAreaBackground ipsPad\">\n\t\t\t\t<ul class='ipsGrid ipsGrid_collapsePhone' data-ipsGrid data-ipsGrid-minItemSize='500' data-ipsGrid-maxItemSize='600' data-ipsGrid-equalHeights='row'>\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $allClubs as $club ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class='ipsGrid_span6 ipsBox'>\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->clubCard( $club );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/ul>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t<ol class=\"ipsDataList ipsDataList_zebra ipsAreaBackground_reset\">\n\t\t\t\t\nCONTENT;\n\nforeach ( $allClubs as $club ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->clubRow( $club );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ol>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( trim( $pagination ) ):\n$return .= <<<CONTENT\n\n\t\t\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t\t\t{$pagination}\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsAreaBackground ipsPad_half\">\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'all_clubs_empty', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction embedClub( $club ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\n$coverPhoto = $club->coverPhoto( FALSE );\n$return .= <<<CONTENT\n\n<div data-embedInfo-maxSize='500' class='ipsRichEmbed cClubEmbed'>\n\t<div class='ipsRichEmbed_header ipsAreaBackground_light ipsClearfix'>\n\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsRichEmbed_openItem'><i class='fa fa-external-link-square'><\/i><\/a>\n\t\t<div class='ipsPhotoPanel ipsPhotoPanel_tiny ipsType_blendLinks'>\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $club->owner, 'tiny' );\n$return .= <<<CONTENT\n\n\t\t\t<div>\n\t\t\t\t<p class='ipsRichEmbed_title ipsType_reset ipsTruncate ipsTruncate_line'>\n\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$sprintf = array($club->owner->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_embed_created_line', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t<\/p>\n\t\t\t\t<p class='ipsRichEmbed_author ipsType_reset ipsType_light ipsTruncate ipsTruncate_line'>\n\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$val = ( $club->created instanceof \\IPS\\DateTime ) ? $club->created : \\IPS\\DateTime::ts( $club->created );$return .= $val->html();\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t<\/p>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n\t<div class='ipsRichEmbed_masthead ipsRichEmbed_mastheadBg ipsType_center cClubEmbedHeader'>\n\t\t\nCONTENT;\n\nif ( $coverPhoto->file ):\n$return .= <<<CONTENT\n\n\t\t\t<span href='\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' style='background-image: url( \"\nCONTENT;\n\n$return .= htmlspecialchars( str_replace( array( '(', ')' ), array( '\\(', '\\)' ), $coverPhoto->file->url ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" )'>\n\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->clubIcon( $club, 'medium' );\n$return .= <<<CONTENT\n\n\t\t\t<\/span>\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t<span>\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->clubIcon( $club, 'medium' );\n$return .= <<<CONTENT\n<\/span>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n\t<div class='ipsPad_double ipsClearfix'>\n\t\t<p class='ipsRichEmbed_itemTitle ipsType_reset ipsTruncate ipsTruncate_line ipsType_blendLinks'>\n\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $club->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t<\/p>\n\t\t<p class='ipsType_reset ipsType_light ipsType_medium'>\n\t\t\t\nCONTENT;\n\n$val = \"club_{$club->type}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n&nbsp;&middot;&nbsp;\nCONTENT;\n\n$pluralize = array( $club->members ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_members_count', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $club->last_activity ):\n$return .= <<<CONTENT\n&nbsp;&middot;&nbsp;\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_last_activity', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n \nCONTENT;\n\n$val = ( $club->last_activity instanceof \\IPS\\DateTime ) ? $club->last_activity : \\IPS\\DateTime::ts( $club->last_activity );$return .= $val->html();\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/p>\n\t\t\nCONTENT;\n\nif ( $desc = $club->about ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsType_richText ipsType_medium ipsSpacer_top ipsSpacer_half' data-truncate='3'>\n\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $desc, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\nCONTENT;\n\nif ( $club->type != $club::TYPE_PUBLIC ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( $club->canJoin() ):\n$return .= <<<CONTENT\n\n\t\t\t\t<hr class='ipsHr ipsHr_small'>\n\t\t\t\t<a class=\"ipsButton ipsButton_small ipsButton_primary ipsButton_fullWidth\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'join')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nif ( $club->isPaid() and $club->memberStatus( \\IPS\\Member::loggedIn() ) !== $club::STATUS_INVITED_BYPASSING_PAYMENT ):\n$return .= <<<CONTENT\ndata-confirm data-confirmIcon=\"info\" data-confirmMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_membership_item', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-confirmSubmessage=\"\nCONTENT;\n$return .= htmlspecialchars( $club->memberFeeMessage(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_join', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\n\t\t\t<hr class='ipsHr ipsHr_small'>\n\t\t\t<ul class='cClubCard_memberList ipsList_inline ipsList_noSpacing ipsSpacer_top'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $club->randomTenMembers() as $member ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhotoFromData( $member['core_members']['member_id'], $member['core_members']['name'], $member['core_members']['members_seo_name'], \\IPS\\Member::photoUrl( $member['core_members'] ), 'tiny' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction header( $club, $container=NULL, $position='full' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\n\\IPS\\Output::i()->cssFiles = array_merge( \\IPS\\Output::i()->cssFiles, \\IPS\\Theme::i()->css( 'styles\/clubs.css', 'core', 'front' ) );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( \\IPS\\Theme::i()->settings['responsive'] ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n\\IPS\\Output::i()->cssFiles = array_merge( \\IPS\\Output::i()->cssFiles, \\IPS\\Theme::i()->css( 'styles\/clubs_responsive.css', 'core', 'front' ) );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\nCONTENT;\n\n$memberStatus = $club->memberStatus( \\IPS\\Member::loggedIn() );\n$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( $position == 'full' ):\n$return .= <<<CONTENT\n\n\t<!-- FULL CLUB HEADER -->\n\t<div id=\"elClubHeader\" class=\"cClubHeader ipsSpacer_bottom ipsSpacer_double\">\n\t\t{$club->coverPhoto(TRUE, 'full')}\n\t\t<div id=\"elClubControls\" class=\"ipsClearfix\">\n\t\t\t<ul class=\"ipsButton_split ipsPos_right\">\n\t\t\t\t\nCONTENT;\n\nif ( $club->isLeader() || ( $club->owner and $club->owner == \\IPS\\Member::loggedIn() ) or \\IPS\\Member::loggedIn()->modPermission('can_access_all_clubs') ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a class=\"ipsButton ipsButton_verySmall ipsButton_light\" href=\"#\" id=\"elClubFeatures\" data-ipsmenu>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_manage', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class=\"fa fa-caret-down\"><\/i><\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $club->type !== \\IPS\\Member\\Club::TYPE_PUBLIC ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( $memberStatus === \\IPS\\Member\\Club::STATUS_BANNED ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<span class=\"ipsButton ipsButton_verySmall ipsButton_link ipsButton_disabled\" data-ipstooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_banned_desc_short', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class=\"fa fa-times\"><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_banned_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\nCONTENT;\n\nelseif ( in_array( $memberStatus, array( \\IPS\\Member\\Club::STATUS_MEMBER, \\IPS\\Member\\Club::STATUS_MODERATOR, \\IPS\\Member\\Club::STATUS_LEADER, \\IPS\\Member\\Club::STATUS_EXPIRED, \\IPS\\Member\\Club::STATUS_EXPIRED_MODERATOR, \\IPS\\Member\\Club::STATUS_WAITING_PAYMENT ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $memberStatus === \\IPS\\Member\\Club::STATUS_WAITING_PAYMENT ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class=\"ipsButton ipsButton_verySmall ipsButton_light\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'join')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_pay_membership_fee', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( in_array( $memberStatus, array( \\IPS\\Member\\Club::STATUS_EXPIRED, \\IPS\\Member\\Club::STATUS_EXPIRED_MODERATOR ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class=\"ipsButton ipsButton_verySmall ipsButton_light\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'renew')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_renew_membership', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( !$club->owner or $club->owner != \\IPS\\Member::loggedIn() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class=\"ipsButton ipsButton_verySmall ipsButton_light\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'leave')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm \nCONTENT;\n\nif ( $club->isPaid() ):\n$return .= <<<CONTENT\ndata-confirmsubmessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_leave_paid_warning', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_leave', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nelseif ( $club->canJoin() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a class=\"ipsButton ipsButton_verySmall ipsButton_light\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'join')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nif ( $club->isPaid() and $memberStatus !== $club::STATUS_INVITED_BYPASSING_PAYMENT ):\n$return .= <<<CONTENT\ndata-confirm data-confirmicon=\"info\" data-confirmmessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_membership_item', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-confirmsubmessage=\"\nCONTENT;\n$return .= htmlspecialchars( $club->memberFeeMessage(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_join', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\nCONTENT;\n\nelseif ( !$club->canRead() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $memberStatus === \\IPS\\Member\\Club::STATUS_REQUESTED ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<span class=\"ipsButton ipsButton_verySmall ipsButton_link ipsButton_disabled\" data-ipstooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_requested_desc_short', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class=\"fa fa-clock-o\"><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_requested_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nelseif ( $memberStatus === \\IPS\\Member\\Club::STATUS_DECLINED ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<span class=\"ipsButton ipsButton_verySmall ipsButton_link ipsButton_disabled\" data-ipstooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_denied_desc_short', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class=\"fa fa-times\"><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_denied_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n<div class=\"ipsTabs ipsClearfix ipsJS_show\" id=\"tabs_club\" data-ipstabbar data-ipstabbar-disablenav>\n\t\t\t\t<a href=\"#tabs_club\" data-action=\"expandTabs\"><i class=\"fa fa-caret-down\"><\/i><\/a>\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->clubsenhancementsNewPage AND $club->new_home_page ):\n$return .= <<<CONTENT\n\r\n\t<ul role=\"tablist\">\r\n\t\t\nCONTENT;\n\nif ( $club->type !== \\IPS\\Member\\Club::TYPE_CLOSED || $club->canRead() ):\n$return .= <<<CONTENT\n\r\n\t\t\t<li>\r\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsTabs_item \nCONTENT;\n\nif ( \\IPS\\Request::i()->module == 'clubs' && \\IPS\\Request::i()->do != 'members' && \\IPS\\Request::i()->do != 'activity' ):\n$return .= <<<CONTENT\n ipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" role=\"tab\">\r\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_home', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\r\n\t\t\t\t<\/a>\r\n\t\t\t<\/li>\r\n\t\t\t<li>\r\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'activity'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsTabs_item \nCONTENT;\n\nif ( \\IPS\\Request::i()->module == 'clubs' && \\IPS\\Request::i()->do == 'activity' ):\n$return .= <<<CONTENT\n ipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" role=\"tab\">\r\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'users_activity_feed', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\r\n\t\t\t\t<\/a>\r\n\t\t\t<\/li>\r\n\t\t\t\nCONTENT;\n\nif ( $club->type !== \\IPS\\Member\\Club::TYPE_PUBLIC ):\n$return .= <<<CONTENT\n\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'members'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsTabs_item \nCONTENT;\n\nif ( \\IPS\\Request::i()->module == 'clubs' && \\IPS\\Request::i()->do == 'members' ):\n$return .= <<<CONTENT\n ipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" role=\"tab\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_members', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t<\/a>\r\n\t\t\t\t<\/li>\r\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\r\n\t\t\t\nCONTENT;\n\nif ( $club->canRead() ):\n$return .= <<<CONTENT\n\r\n\t\t\t\t\nCONTENT;\n\nforeach ( $club->nodes() as $nodeID => $node ):\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $node['url'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsTabs_item \nCONTENT;\n\nif ( $container and get_class( $container ) === $node['node_class'] and $container->_id == $node['node_id'] ):\n$return .= <<<CONTENT\nipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" role=\"tab\">\nCONTENT;\n$return .= htmlspecialchars( $node['name'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\t<\/a>\r\n\t\t\t\t\t<\/li>\r\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\r\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\r\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\r\n\t<\/ul>\r\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\r\n\t\t\t\t<ul role=\"tablist\">\r\n\t\t\t\t\t\nCONTENT;\n\nif ( $club->type !== \\IPS\\Member\\Club::TYPE_CLOSED || $club->canRead() ):\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsTabs_item \nCONTENT;\n\nif ( \\IPS\\Request::i()->module == 'clubs' && \\IPS\\Request::i()->do != 'members' ):\n$return .= <<<CONTENT\n ipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" role=\"tab\">\r\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_home', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\t\t<\/a>\r\n\t\t\t\t\t\t<\/li>\r\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $club->type !== \\IPS\\Member\\Club::TYPE_PUBLIC ):\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'members'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsTabs_item \nCONTENT;\n\nif ( \\IPS\\Request::i()->module == 'clubs' && \\IPS\\Request::i()->do == 'members' ):\n$return .= <<<CONTENT\n ipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" role=\"tab\">\r\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_members', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\t\t\t<\/a>\r\n\t\t\t\t\t\t\t<\/li>\r\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $club->canRead() ):\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $club->nodes() as $nodeID => $node ):\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $node['url'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsTabs_item \nCONTENT;\n\nif ( $container and get_class( $container ) === $node['node_class'] and $container->_id == $node['node_id'] ):\n$return .= <<<CONTENT\nipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" role=\"tab\">\r\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $node['name'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\t\t\t\t<\/a>\r\n\t\t\t\t\t\t\t\t<\/li>\r\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\r\n\t\t\t\t<\/ul>\r\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/div>\n\t\t<\/div>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->clubIcon( $club, 'medium', 'ipsResponsive_showPhone ipsResponsive_inlineBlock' );\n$return .= <<<CONTENT\n\n\t<\/div>\n\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\n\t<!-- SIDEBAR CLUB HEADER -->\n\t<div id=\"elClubHeader_small\" class=\"cClubHeader ipsBox\">\n\t\t{$club->coverPhoto(TRUE, 'sidebar')}\n\t\t<div class=\"ipsPad\">\n\t\t\t<p class=\"ipsType_minorHeading ipsType_center ipsType_reset\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_currently_viewing', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t\t\t<h1 class=\"ipsType_pageTitle ipsTruncate ipsTruncate_line ipsType_center\">\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->clubs_require_approval and !$club->approved ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span class=\"ipsBadge ipsBadge_small ipsBadge_icon ipsBadge_warning\" data-ipstooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_unapproved', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class=\"fa fa-eye-slash\"><\/i><\/span>\n\t\t\t\t\nCONTENT;\n\nelseif ( $club->featured ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span class=\"ipsBadge ipsBadge_small ipsBadge_icon ipsBadge_positive\" data-ipstooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'featured', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class=\"fa fa-star\"><\/i><\/span>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= htmlspecialchars( $club->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/h1>\n\t\t\t<p class=\"ipsType_reset ipsType_medium ipsType_center\">\n\t\t\t\t\nCONTENT;\n\n$val = \"club_{$club->type}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\u00a0\u00b7\u00a0\n\t\t\t\t\nCONTENT;\n\n$pluralize = array( $club->members ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_members_count', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n\n\n\t\t\t\t\nCONTENT;\n\nif ( $club->isLeader() and $club->type === $club::TYPE_CLOSED and $pendingMembers = $club->members( array( $club::STATUS_REQUESTED ), NULL, NULL, 4 ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<br><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'members')->setQueryString('filter', 'requested')->setQueryString('filter', 'requested'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsType_issue\"><i class=\"fa fa-info-circle\"><\/i> \u00a0\nCONTENT;\n\n$pluralize = array( $pendingMembers ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_pending_members', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/a><\/p>\n\n\t\t\t\nCONTENT;\n\nif ( $club->type !== \\IPS\\Member\\Club::TYPE_PUBLIC and $club->type !== $club::TYPE_READONLY and $club->canJoin() ):\n$return .= <<<CONTENT\n\n\t\t\t\t<hr class=\"ipsHr ipsHr_small\">\n<a class=\"ipsButton ipsButton_verySmall ipsButton_primary ipsButton_fullWidth\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'join')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nif ( $club->isPaid() and $memberStatus !== $club::STATUS_INVITED_BYPASSING_PAYMENT ):\n$return .= <<<CONTENT\ndata-confirm data-confirmicon=\"info\" data-confirmmessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_membership_item', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-confirmsubmessage=\"\nCONTENT;\n$return .= htmlspecialchars( $club->memberFeeMessage(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_join', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\t\nCONTENT;\n\nif ( $club->isLeader() || ( $club->owner and $club->owner == \\IPS\\Member::loggedIn() ) or \\IPS\\Member::loggedIn()->modPermission('can_access_all_clubs') ):\n$return .= <<<CONTENT\n\n\t\t\t\t<hr class=\"ipsHr ipsHr_small\">\n<a class=\"ipsButton ipsButton_verySmall ipsButton_light ipsButton_fullWidth\" href=\"#\" id=\"elClubFeatures\" data-ipsmenu>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_manage', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class=\"fa fa-caret-down\"><\/i><\/a>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\t<hr class=\"ipsHr ipsHr_small\">\n<div class=\"ipsSideMenu ipsAreaBackground_reset\">\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->clubsenhancementsNewPage AND $club->new_home_page ):\n$return .= <<<CONTENT\n\r\n\t<ul class=\"ipsSideMenu_list\">\n<li>\r\n\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsSideMenu_item\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_home', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\r\n\t\t<\/li>\r\n      \t<li>\r\n\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'activity'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsSideMenu_item \nCONTENT;\n\nif ( \\IPS\\Request::i()->module == 'clubs' && \\IPS\\Request::i()->do == 'activity' ):\n$return .= <<<CONTENT\n ipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" role=\"tab\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'users_activity_feed', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\r\n\t\t<\/li>\r\n\t\t\nCONTENT;\n\nif ( $club->type !== \\IPS\\Member\\Club::TYPE_PUBLIC ):\n$return .= <<<CONTENT\n\r\n\t\t\t<li>\r\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'members'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsSideMenu_item \nCONTENT;\n\nif ( \\IPS\\Request::i()->module == 'clubs' && \\IPS\\Request::i()->do == 'members' ):\n$return .= <<<CONTENT\n ipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\r\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_members', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t<\/a>\r\n\t\t\t<\/li>\r\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\r\n\t\t\nCONTENT;\n\nif ( $club->canRead() ):\n$return .= <<<CONTENT\n\r\n\t\t\t\nCONTENT;\n\nforeach ( $club->nodes() as $nodeID => $node ):\n$return .= <<<CONTENT\n\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $node['url'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsSideMenu_item \nCONTENT;\n\nif ( $container and get_class( $container ) === $node['node_class'] and $container->_id == $node['node_id'] ):\n$return .= <<<CONTENT\nipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" role=\"tab\">\nCONTENT;\n$return .= htmlspecialchars( $node['name'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\r\n\t\t\t\t<\/li>\r\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\r\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\r\n\t<\/ul>\r\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\r\n\t\t\t\t<ul class=\"ipsSideMenu_list\">\n<li>\r\n\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsSideMenu_item\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_home', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\r\n\t\t\t\t\t<\/li>\r\n\t\t\t\t\t\nCONTENT;\n\nif ( $club->type !== \\IPS\\Member\\Club::TYPE_PUBLIC ):\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'members'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsSideMenu_item \nCONTENT;\n\nif ( \\IPS\\Request::i()->module == 'clubs' && \\IPS\\Request::i()->do == 'members' ):\n$return .= <<<CONTENT\n ipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\r\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_members', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\t\t<\/a>\r\n\t\t\t\t\t\t<\/li>\r\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\nCONTENT;\n\nif ( $club->canRead() ):\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $club->nodes() as $nodeID => $node ):\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $node['url'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsSideMenu_item \nCONTENT;\n\nif ( $container and get_class( $container ) === $node['node_class'] and $container->_id == $node['node_id'] ):\n$return .= <<<CONTENT\nipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" role=\"tab\">\r\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $node['name'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\t\t\t<\/a>\r\n\t\t\t\t\t\t\t<\/li>\r\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\r\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\r\n\t\t\t\t<\/ul>\r\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/div>\n\t\t\t\n\t\t\t<div class=\"ipsResponsive_hideTablet ipsResponsive_hideDesktop\">\n\t\t\t\t<a href=\"#elBrowseClub_menu\" class=\"ipsButton ipsButton_verySmall ipsButton_light ipsButton_fullWidth\" id=\"elBrowseClub\" data-ipsmenu>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'browse_club', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class=\"fa fa-caret-down\"><\/i><\/a>\n\t\t\t\t\n\t\t\t\t<ul id=\"elBrowseClub_menu\" class=\"ipsMenu ipsMenu_auto ipsHide\">\n<li class=\"ipsMenu_title\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'browse_club', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\t<li class=\"ipsMenu_item\">\n\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_home', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\t\nCONTENT;\n\nif ( $club->type !== \\IPS\\Member\\Club::TYPE_PUBLIC ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class=\"ipsMenu_item\">\n\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'members'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_members', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( $club->canRead() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $club->nodes() as $nodeID => $node ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li class=\"ipsMenu_item\">\n\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $node['url'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $node['name'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/ul>\n<\/div>\n\t\t\t\t\n\n\t\t\t\nCONTENT;\n\nif ( $club->type !== $club::TYPE_PUBLIC and in_array( $memberStatus, array( \\IPS\\Member\\Club::STATUS_MEMBER, \\IPS\\Member\\Club::STATUS_MODERATOR, \\IPS\\Member\\Club::STATUS_LEADER, \\IPS\\Member\\Club::STATUS_EXPIRED,  \\IPS\\Member\\Club::STATUS_EXPIRED_MODERATOR ) ) and ( !$club->owner or $club->owner != \\IPS\\Member::loggedIn() ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<hr class=\"ipsHr ipsHr_small\">\n<p class=\"ipsType_reset ipsType_right ipsType_small ipsType_blendLinks ipsType_light\">\n\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'leave')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm \nCONTENT;\n\nif ( $club->isPaid() ):\n$return .= <<<CONTENT\ndata-confirmsubmessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_leave_paid_warning', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_leave', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t<\/p>\n\t\t\t\nCONTENT;\n\nelseif ( !$club->canRead() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $memberStatus === \\IPS\\Member\\Club::STATUS_REQUESTED ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span class=\"ipsButton ipsButton_verySmall ipsButton_link ipsButton_disabled\" data-ipstooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_requested_desc_short', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class=\"fa fa-clock-o\"><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_requested_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nelseif ( $memberStatus === \\IPS\\Member\\Club::STATUS_DECLINED ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span class=\"ipsButton ipsButton_verySmall ipsButton_link ipsButton_disabled\" data-ipstooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_denied_desc_short', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class=\"fa fa-times\"><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_denied_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( $club->isLeader() || ( $club->owner and $club->owner == \\IPS\\Member::loggedIn() ) or \\IPS\\Member::loggedIn()->modPermission('can_access_all_clubs') ):\n$return .= <<<CONTENT\n\n\t<ul class=\"ipsMenu ipsMenu_auto ipsHide\" id=\"elClubFeatures_menu\">\n\t\t\nCONTENT;\n\nif ( !\\IPS\\Settings::i()->clubs_require_approval or $club->approved ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( $club->isLeader() and $nodeTypes = \\IPS\\Member\\Club::availableNodeTypes( \\IPS\\Member::loggedIn() ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class=\"ipsMenu_title\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_create_node', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\nCONTENT;\n\nforeach ( $nodeTypes as $nodeType ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class=\"ipsMenu_item\"><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'nodeForm', 'type' => $nodeType ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsdialog data-ipsdialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_create_node', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$val = \"{$nodeType::clubFrontTitle()}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( ( $club->owner and $club->owner == \\IPS\\Member::loggedIn() ) or \\IPS\\Member::loggedIn()->modPermission('can_access_all_clubs') or \\IPS\\Member::loggedIn()->modPermission('can_manage_featured_clubs') ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class=\"ipsMenu_sep\"><hr class=\"ipsHr\"><\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( ( $club->owner and $club->owner == \\IPS\\Member::loggedIn() ) or \\IPS\\Member::loggedIn()->modPermission('can_access_all_clubs') ):\n$return .= <<<CONTENT\n\n\t\t\t<li class=\"ipsMenu_item\">\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'edit'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsdialog data-ipsdialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_edit_settings', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_edit_settings', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_manage_featured_clubs') ):\n$return .= <<<CONTENT\n\n\t\t\t<li class=\"ipsMenu_item\">\n\t\t\t\t\nCONTENT;\n\nif ( $club->featured ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'unfeature')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_unfeature', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'feature')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_feature', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $club->canInvite() ):\n$return .= <<<CONTENT\n\n\t\t\t<li class=\"ipsMenu_item\">\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( 'do', 'invite' ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsdialog data-ipsdialog-size=\"narrow\" data-ipsdialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_invite_members', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_invite_members', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $container and $club->isLeader() ):\n$return .= <<<CONTENT\n\n\t\t\t<li class=\"ipsMenu_sep\"><hr class=\"ipsHr\"><\/li>\n\t\t\t<li class=\"ipsMenu_item\">\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'nodeForm', 'type' => get_class( $container ), 'node' => $container->_id ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsdialog data-ipsdialog-title=\"\nCONTENT;\n$return .= htmlspecialchars( $container->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$sprintf = array(\\IPS\\Member::loggedIn()->language()->addToStack( $container::$nodeTitle . '_sg' )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubs_edit_this_container', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nif ( $container->modPermission( 'delete', \\IPS\\Member::loggedIn() ) or ( isset( $container::$contentItemClass ) and $itemClass = $container::$contentItemClass and !$itemClass::contentCount( $container, TRUE, TRUE, TRUE, 1 ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class=\"ipsMenu_item\">\n\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'nodeDelete', 'type' => get_class( $container ), 'node' => $container->_id ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm data-confirmsubmessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubs_delete_container_confirm', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$sprintf = array(\\IPS\\Member::loggedIn()->language()->addToStack( $container::$nodeTitle . '_sg' )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubs_delete_this_container', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nif ( $club->approved AND ( $club->owner == \\IPS\\Member::loggedIn() OR \\IPS\\Member::loggedIn()->isAdmin() ) ):\n$return .= <<<CONTENT\n\r\n\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->clubsenhancementsNewPage ):\n$return .= <<<CONTENT\n\r\n      <li class=\"ipsMenu_item\">\r\n                  <a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( 'do', 'newHomePage' ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsdialog data-ipsdialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubsenhancementsNewHomePage', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubsenhancementsNewHomePage', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\r\n      <\/li>\r\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\r\n\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->clubsenhancementsOwnerCanAddMembers ):\n$return .= <<<CONTENT\n\r\n      <li class=\"ipsMenu_item\">\r\n                  <a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( 'do', 'addMembersGroup' ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsdialog data-ipsdialog-size=\"medium\" data-ipsdialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubsenhancementsAddMembers', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubsenhancementsAddMembersShort', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\r\n      <\/li>\r\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\r\n\t<li class=\"ipsMenu_item\">\r\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( 'do', 'changeOwner' ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsdialog data-ipsdialog-size=\"narrow\" data-ipsdialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubsenhancementsChangeOwner', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubsenhancementsChangeOwnerShort', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\r\n\t<\/li>\r\n\t<li class=\"ipsMenu_item\">\r\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( 'do', 'changeType' ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsdialog data-ipsdialog-size=\"narrow\" data-ipsdialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubsenhancementsChangeType', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubsenhancementsChangeTypeShort', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\r\n\t<\/li>\r\n\t<li class=\"ipsMenu_item\">\r\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( 'do', 'manageFeatures' ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsdialog data-ipsdialog-size=\"medium\" data-ipsdialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubsenhancementsManageFeatures', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubsenhancementsManageFeatures', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\r\n\t<\/li>\r\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/ul>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction mapPopup( $club ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class='ipsPhotoPanel ipsPhotoPanel_mini'>\n\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->clubIcon( $club, 'mini' );\n$return .= <<<CONTENT\n\n\t<div class='ipsPad_half'>\n\t\t<h3 class='ipsType_sectionHead ipsType_large ipsType_blendLinks'>\n\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $club->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $club->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t<\/h3>\n\t\t<p class='ipsType_reset ipsType_light'>\n\t\t\t\nCONTENT;\n\n$val = \"club_{$club->type}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t&nbsp;&middot;&nbsp;\n\t\t\t\nCONTENT;\n\n$pluralize = array( $club->members ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_members_count', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n\n\t\t<\/p>\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction members( $club, $members, $pagination, $sortBy, $filter, $clubStaff ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( \\IPS\\Settings::i()->clubs_header != 'sidebar' ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->header( $club );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\nCONTENT;\n\n$memberStatus = $club->memberStatus( \\IPS\\Member::loggedIn(), 2 );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->nonMemberClubStatus( $club, $memberStatus );\n$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( $club->canInvite() ):\n$return .= <<<CONTENT\n\n\t<ul class=\"ipsToolList ipsToolList_horizontal ipsClearfix ipsSpacer_both\">\n<li class=\"ipsToolList_primaryAction\">\n\t\t\t<a class=\"ipsButton ipsButton_medium ipsButton_important ipsButton_fullWidth\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( 'do', 'invite' ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsdialog data-ipsdialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_invite_members', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_invite_members', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t<\/li>\n\t\nCONTENT;\n\nif ( ( $club->owner == \\IPS\\Member::loggedIn() AND \\IPS\\Settings::i()->clubsenhancementsOwnerCanAddMembers ) OR \\IPS\\Member::loggedIn()->isAdmin() ):\n$return .= <<<CONTENT\n\r\n\t<li class=\"ipsToolList_primaryAction\">\r\n        <a class=\"ipsButton ipsButton_medium ipsButton_important ipsButton_fullWidth\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( 'do', 'addMembersGroup' ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsdialog=\"\" data-ipsdialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubsenhancementsAddMembersShort', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsdialog-size=\"medium\">\r\n            \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubsenhancementsAddMembersShort', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\r\n        <\/a>\r\n    <\/li>\r\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\r\n<\/ul>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n<div class=\"ipsBox ipsSpacer_bottom\">\n\t<h2 class=\"ipsType_sectionTitle ipsType_reset ipsType_medium\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_leaders', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \\IPS\\Request::i()->app )->membersRows( $club, $clubStaff );\n$return .= <<<CONTENT\n\n<\/div>\n\n\n<div class=\"ipsBox\">\n\t<h2 class=\"ipsType_sectionTitle ipsType_reset ipsType_medium\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_all_members', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t<div data-baseurl=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'members'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-controller=\"core.global.core.table\">\n\t\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t\t<ul class=\"ipsButtonRow ipsPos_right ipsClearfix\">\n<li>\n\t\t\t\t\t<a href=\"#elSortByMenu_menu\" id=\"elSortByMenu\" data-role=\"sortButton\" data-ipsmenu data-ipsmenu-activeclass=\"ipsButtonRow_active\" data-ipsmenu-selectable=\"radio\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'sort_by', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class=\"fa fa-caret-down\"><\/i><\/a>\n\t\t\t\t\t<ul class=\"ipsMenu ipsMenu_auto ipsMenu_withStem ipsMenu_selectable ipsHide\" id=\"elSortByMenu_menu\">\n<li class=\"ipsMenu_item \nCONTENT;\n\nif ( $sortBy == 'joined' ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" data-ipsmenuvalue=\"joined\"><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'members', 'filter' => $filter, 'sortby' => 'joined', 'page' => '1' ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'newest', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t<li class=\"ipsMenu_item \nCONTENT;\n\nif ( $sortBy == 'name' ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" data-ipsmenuvalue=\"name\"><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'members', 'filter' => $filter, 'sortby' => 'name', 'page' => '1' ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'username', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t<\/ul>\n<\/li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"#elFilterByMenu_menu\" data-role=\"tableFilterMenu\" id=\"elFilterByMenu\" data-ipsmenu data-ipsmenu-activeclass=\"ipsButtonRow_active\" data-ipsmenu-selectable=\"radio\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'filter_by', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class=\"fa fa-caret-down\"><\/i><\/a>\n\t\t\t\t\t<ul class=\"ipsMenu ipsMenu_auto ipsMenu_withStem ipsMenu_selectable ipsHide\" id=\"elFilterByMenu_menu\">\n<li data-action=\"tableFilter\" data-ipsmenuvalue=\"\" class=\"ipsMenu_item \nCONTENT;\n\nif ( !$filter ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'members', 'filter' => NULL, 'sortby' => $sortBy, 'page' => '1' ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"\nCONTENT;\n\nif ( !$filter ):\n$return .= <<<CONTENT\nipsButtonRow_active\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $club->isPaid() and $club->renewal_price ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_active_members', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_members', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $club->isLeader() and $club->isPaid() and $club->renewal_price ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li data-action=\"tableFilter\" data-ipsmenuvalue=\"expired\" class=\"ipsMenu_item \nCONTENT;\n\nif ( $filter == 'expired' ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'members', 'filter' => 'expired', 'sortby' => $sortBy, 'page' => '1' ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"\nCONTENT;\n\nif ( !$filter ):\n$return .= <<<CONTENT\nipsButtonRow_active\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_expired_members', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li data-action=\"tableFilter\" data-ipsmenuvalue=\"leader\" class=\"ipsMenu_item \nCONTENT;\n\nif ( $filter == 'leader' ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'members', 'filter' => 'leader', 'sortby' => $sortBy, 'page' => '1' ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"\nCONTENT;\n\nif ( !$filter ):\n$return .= <<<CONTENT\nipsButtonRow_active\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_leaders_and_moderators', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $club->isLeader() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $club->type === $club::TYPE_CLOSED ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li data-action=\"tableFilter\" data-ipsmenuvalue=\"requested\" class=\"ipsMenu_item \nCONTENT;\n\nif ( $filter == 'requested' ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'members', 'filter' => 'requested', 'sortby' => $sortBy, 'page' => '1' ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"\nCONTENT;\n\nif ( !$filter ):\n$return .= <<<CONTENT\nipsButtonRow_active\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_requests', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $club->isPaid() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<li data-action=\"tableFilter\" data-ipsmenuvalue=\"payment_pending\" class=\"ipsMenu_item \nCONTENT;\n\nif ( $filter == 'payment_pending' ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'members', 'filter' => 'payment_pending', 'sortby' => $sortBy, 'page' => '1' ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"\nCONTENT;\n\nif ( !$filter ):\n$return .= <<<CONTENT\nipsButtonRow_active\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_payment_pending', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li data-action=\"tableFilter\" data-ipsmenuvalue=\"invited\" class=\"ipsMenu_item \nCONTENT;\n\nif ( $filter == 'invited' ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'members', 'filter' => 'invited', 'sortby' => $sortBy, 'page' => '1' ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"\nCONTENT;\n\nif ( !$filter ):\n$return .= <<<CONTENT\nipsButtonRow_active\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_invitations', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t<li data-action=\"tableFilter\" data-ipsmenuvalue=\"banned\" class=\"ipsMenu_item \nCONTENT;\n\nif ( $filter == 'banned' ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'members', 'filter' => 'banned', 'sortby' => $sortBy, 'page' => '1' ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"\nCONTENT;\n\nif ( !$filter ):\n$return .= <<<CONTENT\nipsButtonRow_active\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_banned', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n<\/li>\n\t\t\t<\/ul>\n<div data-role=\"tablePagination\">\n\t\t\t\t{$pagination}\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<div data-role=\"tableRows\" \nCONTENT;\n\nif ( $club->isLeader() ):\n$return .= <<<CONTENT\ndata-controller=\"core.front.clubs.requests\" \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \\IPS\\Request::i()->app )->membersRows( $club, $members );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\t\nCONTENT;\n\nif ( trim( $pagination ) ):\n$return .= <<<CONTENT\n\n\t\t\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\" data-role=\"tablePagination\">\n\t\t\t\t{$pagination}\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction membersRows( $club, $members ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<ol class='ipsAreaBackground ipsList_reset ipsPad ipsGrid ipsGrid_collapsePhone ipsClear' data-ipsGrid data-ipsGrid-equalHeights='row' data-ipsGrid-minItemSize='170' data-ipsGrid-maxItemSize='400'>\n\nCONTENT;\n\nif ( count( $members ) ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nforeach ( $members as $member ):\n$return .= <<<CONTENT\n\n\t\t<li class='ipsGrid_span2 ipsClearfix ipsMemberCard'>\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhotoFromData( $member['core_members']['member_id'], $member['core_members']['name'], $member['core_members']['members_seo_name'], \\IPS\\Member::photoUrl( $member['core_members'] ), 'medium', 'ipsMemberCard_photo' );\n$return .= <<<CONTENT\n\n\n\t\t\t<h3 class='ipsType_sectionHead ipsMemberCard_name'>\n\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $member['core_members']['name'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t<\/h3>\n\n\t\t\t\nCONTENT;\n\nif ( $club->owner and $member['core_members']['member_id'] === $club->owner->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t<span class=\"ipsBadge ipsBadge_positive cClubMemberStatus\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_owner', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\nCONTENT;\n\nelseif ( $member['core_clubs_memberships']['status'] === \\IPS\\Member\\Club::STATUS_LEADER ):\n$return .= <<<CONTENT\n\n\t\t\t\t<span class=\"ipsBadge ipsBadge_positive cClubMemberStatus\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_leader', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\nCONTENT;\n\nelseif ( in_array( $member['core_clubs_memberships']['status'], array( \\IPS\\Member\\Club::STATUS_MODERATOR, \\IPS\\Member\\Club::STATUS_EXPIRED_MODERATOR ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<span class=\"ipsBadge ipsBadge_intermediary cClubMemberStatus\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_moderator', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\t\nCONTENT;\n\nif ( $club->isLeader() and !in_array( $member['core_clubs_memberships']['status'], array( \\IPS\\Member\\Club::STATUS_REQUESTED ) ) and ( !$club->owner or $member['core_members']['member_id'] !== $club->owner->member_id ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<a href=\"#elMember\nCONTENT;\n$return .= htmlspecialchars( $member['core_members']['member_id'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\nMenu_menu\" id=\"elMember\nCONTENT;\n$return .= htmlspecialchars( $member['core_members']['member_id'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\nMenu\" data-ipsMenu class=\"ipsButton ipsButton_verySmall ipsButton_light ipsButton_narrow ipsMemberCard_controls\"><i class=\"fa fa-cog\"><\/i> <i class='fa fa-angle-down'><\/i><\/a>\n\t\t\t\t<ul class=\"ipsMenu ipsMenu_auto ipsMenu_withStem ipsHide\" id=\"elMember\nCONTENT;\n$return .= htmlspecialchars( $member['core_members']['member_id'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\nMenu_menu\">\n\t\t\t\t\t\nCONTENT;\n\nif ( in_array( $member['core_clubs_memberships']['status'], array( \\IPS\\Member\\Club::STATUS_DECLINED, \\IPS\\Member\\Club::STATUS_BANNED ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class=\"ipsMenu_item\" ><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'reInvite', 'member' => $member['core_members']['member_id'] ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_banned_invite', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $club->isPaid() and $club->renewal_price ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member['nexus_purchases']['ps_expire'] or in_array( $member['core_clubs_memberships']['status'], array( \\IPS\\Member\\Club::STATUS_INVITED, \\IPS\\Member\\Club::STATUS_WAITING_PAYMENT ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class=\"ipsMenu_item\" ><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'bypassPayment', 'member' => $member['core_members']['member_id'] ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm data-confirmSubMessage=\"\nCONTENT;\n\nif ( $member['core_clubs_memberships']['status'] === \\IPS\\Member\\Club::STATUS_INVITED ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_bypass_fee_renew_warn', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_bypass_fee_existing_warn', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_bypass_fee', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nelseif ( !$member['nexus_purchases']['ps_expire'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class=\"ipsMenu_item\" ><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'restorePayment', 'member' => $member['core_members']['member_id'] ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm \nCONTENT;\n\nif ( $member['nexus_purchases']['ps_expire'] === NULL and !in_array( $member['core_clubs_memberships']['status'], array( \\IPS\\Member\\Club::STATUS_INVITED_BYPASSING_PAYMENT ) ) ):\n$return .= <<<CONTENT\ndata-confirmSubMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_restore_fee_no_purchase_warn', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_restore_fee', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( !in_array( $member['core_clubs_memberships']['status'], array( \\IPS\\Member\\Club::STATUS_INVITED, \\IPS\\Member\\Club::STATUS_INVITED_BYPASSING_PAYMENT, \\IPS\\Member\\Club::STATUS_WAITING_PAYMENT ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member['core_clubs_memberships']['status'] === \\IPS\\Member\\Club::STATUS_LEADER ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class=\"ipsMenu_item\" ><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'demoteLeader', 'member' => $member['core_members']['member_id'] ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_demote_leader', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class=\"ipsMenu_item\" ><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'makeLeader', 'member' => $member['core_members']['member_id'] ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm data-confirmSubMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_make_leader_confirm', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_make_leader', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( in_array( $member['core_clubs_memberships']['status'], array( \\IPS\\Member\\Club::STATUS_MODERATOR, \\IPS\\Member\\Club::STATUS_EXPIRED_MODERATOR ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class=\"ipsMenu_item\" ><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'demoteModerator', 'member' => $member['core_members']['member_id'] ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_demote_moderator', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class=\"ipsMenu_item\" ><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'makeModerator', 'member' => $member['core_members']['member_id'] ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm data-confirmSubMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_make_moderator_confirm', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_make_moderator', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li class=\"ipsMenu_item\" ><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'removeMember', 'member' => $member['core_members']['member_id'] ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm data-confirmSubMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_remove_member_confirm', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_remove_member', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li class=\"ipsMenu_item\" ><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'removeMember', 'member' => $member['core_members']['member_id'] ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm data-confirmSubMessage=\"\nCONTENT;\n\nif ( $member['core_clubs_memberships']['status'] === \\IPS\\Member\\Club::STATUS_INVITED ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_remove_accepted_confirm', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_remove_invitation_confirm', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_remove_invitation', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/ul>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\t<hr class='ipsHr ipsHr_small'>\n\n\t\t\t<h4 class='ipsType_minorHeading ipsType_unbold'>\n\t\t\t\t\nCONTENT;\n\nif ( $member['core_clubs_memberships']['status'] === \\IPS\\Member\\Club::STATUS_REQUESTED ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_date_joined_request', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nelseif ( in_array( $member['core_clubs_memberships']['status'], array( \\IPS\\Member\\Club::STATUS_INVITED, \\IPS\\Member\\Club::STATUS_INVITED_BYPASSING_PAYMENT ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_date_joined_invite', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_date_joined', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/h4>\n\t\t\t<p class='ipsType_reset ipsTruncate ipsTruncate_line'>\n\t\t\t\t\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\DateTime::ts( $member['core_clubs_memberships']['joined'] )->relative(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t<\/p>\n\n\t\t\t\nCONTENT;\n\nif ( $club->isLeader() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $club->isPaid() and $club->renewal_price ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( $member['core_clubs_memberships']['status'] === \\IPS\\Member\\Club::STATUS_INVITED_BYPASSING_PAYMENT ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<p class='ipsType_reset ipsContained ipsType_break'>\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_fee_waived', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\nCONTENT;\n\nelseif ( in_array( $member['core_clubs_memberships']['status'], array( \\IPS\\Member\\Club::STATUS_MEMBER, \\IPS\\Member\\Club::STATUS_EXPIRED, \\IPS\\Member\\Club::STATUS_MODERATOR, \\IPS\\Member\\Club::STATUS_EXPIRED_MODERATOR ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<hr class='ipsHr ipsHr_small'>\n\t\t\t\t\t\t<h4 class='ipsType_minorHeading ipsType_unbold'>\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_membership_renews', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/h4>\n\t\t\t\t\t\t<p class='ipsType_reset ipsContained ipsType_break'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member['nexus_purchases']['ps_expire'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( !$member['nexus_purchases']['ps_active'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<span class=\"ipsType_warning\">\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$val = ( $member['nexus_purchases']['ps_expire'] instanceof \\IPS\\DateTime ) ? $member['nexus_purchases']['ps_expire'] : \\IPS\\DateTime::ts( $member['nexus_purchases']['ps_expire'] );$return .= $val->html();\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( !$member['nexus_purchases']['ps_active'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'never', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( ( $member['added_by']['name'] or $member['invited_by']['name'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<hr class='ipsHr ipsHr_small'>\n\t\t\t\t\t<p class='ipsType_reset ipsContained ipsType_break'>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( in_array( $member['core_clubs_memberships']['status'], array( \\IPS\\Member\\Club::STATUS_DECLINED, \\IPS\\Member\\Club::STATUS_BANNED ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member['added_by']['name'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member['core_clubs_memberships']['status'] === \\IPS\\Member\\Club::STATUS_BANNED ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array($member['added_by']['name']); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_banned_by', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array($member['added_by']['name']); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_declined_by', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member['core_clubs_memberships']['status'] === \\IPS\\Member\\Club::STATUS_BANNED ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_banned', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_declined', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member['invited_by']['name'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array($member['invited_by']['name']); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_invited_by', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array($member['added_by']['name']); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_added_by', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/p>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\n\t\t\t\nCONTENT;\n\nif ( $club->isLeader() && $member['core_clubs_memberships']['status'] === \\IPS\\Member\\Club::STATUS_REQUESTED ):\n$return .= <<<CONTENT\n\n\t\t\t\t<hr class='ipsHr ipsHr_small'>\n\t\t\t\t<ul class='ipsGrid ipsMemberCard_buttons'>\n\t\t\t\t\t<li class='ipsGrid_span6'>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $club->isPaid() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<ul class=\"ipsButton_split ipsButton_fullWidth\">\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'acceptRequest', 'member' => $member['core_members']['member_id'] ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsButton ipsButton_small ipsButton_positive\" data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_accept_request', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-action='requestApprove'>\n\t\t\t\t\t\t\t\t\t\t<i class='fa fa-check'><\/i>\n\t\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href=\"#elMember\nCONTENT;\n$return .= htmlspecialchars( $member['core_members']['member_id'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\nAcceptMenu_menu\" id=\"elMember\nCONTENT;\n$return .= htmlspecialchars( $member['core_members']['member_id'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\nAcceptMenu\" data-ipsMenu class=\"ipsButton ipsButton_small ipsButton_positive ipsButton_narrow\"><i class='fa fa-caret-down'><\/i><\/a>\n\t\t\t\t\t\t\t\t\t<ul class=\"ipsMenu ipsMenu_auto ipsMenu_withStem ipsHide\" id=\"elMember\nCONTENT;\n$return .= htmlspecialchars( $member['core_members']['member_id'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\nAcceptMenu_menu\" data-role=\"acceptMenu\">\n\t\t\t\t\t\t\t\t\t\t<li class=\"ipsMenu_item\"><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'acceptRequest', 'waiveFee' => 1, 'member' => $member['core_members']['member_id'] ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-action='requestApprove'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_bypass_fee', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'acceptRequest', 'member' => $member['core_members']['member_id'] ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsButton ipsButton_small ipsButton_positive ipsButton_fullWidth\" data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_accept_request', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-action='requestApprove'><i class='fa fa-check'><\/i><\/a>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/li>\n\t\t\t\t\t<li class='ipsGrid_span6'>\n\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'declineRequest', 'member' => $member['core_members']['member_id'] ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsButton ipsButton_small ipsButton_negative ipsButton_fullWidth\" data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_decline_request', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-action='requestDecline'><i class='fa fa-times'><\/i><\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t<\/ul>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/li>\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<li>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_results', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/li>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/ol>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction myClubsSidebar( $clubs, $myClubsActivity=NULL ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id and \\IPS\\Member::loggedIn()->group['g_create_clubs'] ):\n$return .= <<<CONTENT\n\n\t<a class=\"ipsButton ipsButton_medium ipsButton_important ipsButton_fullWidth\" href=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=clubs&controller=directory&do=create\", null, \"clubs_list\", array(), 0 ) );\n$return .= <<<CONTENT\n\" data-ipsDialog data-ipsDialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'create_club', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'create_club', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n<div id='elMyClubs' class=\"ipsWidget ipsWidget_vertical ipsBox\">\n\t<h2 class=\"ipsType_reset ipsWidget_title\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'my_clubs', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\nCONTENT;\n\nif ( count( $clubs ) ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"widgets\", \\IPS\\Request::i()->app )->clubs( $clubs );\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<section class=\"ipsWidget_inner ipsPad_half\">\n\t\t\t<p class='ipsType_light ipsType_center ipsPad_half'>\n\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'my_clubs_empty', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t<\/p>\n\t\t<\/section>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\n\n<div id='elMyClubsActivity' class=\"ipsWidget ipsWidget_vertical ipsBox\">\n\t<h2 class=\"ipsType_reset ipsWidget_title\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubs_recent_activity', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\nCONTENT;\n\nif ( !count( $myClubsActivity ) ):\n$return .= <<<CONTENT\n\n\t\t<p class='ipsType_light ipsType_center ipsPad'>\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clubs_no_recent_activity', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t<\/p>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<ol class=\"ipsStream ipsList_reset ipsPad\">\n\t\t\t\nCONTENT;\n\nforeach ( $myClubsActivity as $result ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $result !== NULL ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t{$result->html()}\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/ol>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction nonMemberClubStatus( $club, $memberStatus ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( in_array( $memberStatus['status'], array( $club::STATUS_INVITED, $club::STATUS_INVITED_BYPASSING_PAYMENT ) ) && $club->canJoin() ):\n$return .= <<<CONTENT\n\n    \nCONTENT;\n\nif ( $memberStatus['invited_by'] ):\n$return .= <<<CONTENT\n\n    \t\nCONTENT;\n\n$invitedBy = \\IPS\\Member::load( $memberStatus['invited_by'] );\n$return .= <<<CONTENT\n\n    \t<div class='ipsBox ipsPad'>\n\t    \t<div class='ipsColumns ipsColumns_collapsePhone'>\n\t    \t\t<div class='ipsColumn ipsColumn_fluid'>\n\t\t\t\t\t<div class='ipsPhotoPanel ipsPhotoPanel_notPhone ipsPhotoPanel_tiny'>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $invitedBy, 'tiny' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='ipsType_medium'>\n\t\t\t\t\t\t\t<h3 class='ipsType_reset ipsType_large'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_youre_invited', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t\t\t<p class='ipsType_reset ipsType_medium'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $memberStatus['status'] === $club::STATUS_INVITED_BYPASSING_PAYMENT ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array($invitedBy->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_invited_bypassing_payment', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array($invitedBy->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_youre_invited_desc', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t<div class='ipsColumn ipsColumn_narrow'>\n\t\t\t\t\t<a class=\"ipsButton ipsButton_medium ipsButton_fullWidth ipsButton_positive\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'join')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nif ( $club->isPaid() and $memberStatus['status'] !== $club::STATUS_INVITED_BYPASSING_PAYMENT ):\n$return .= <<<CONTENT\ndata-confirm data-confirmIcon=\"info\" data-confirmMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_membership_item', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-confirmSubmessage=\"\nCONTENT;\n$return .= htmlspecialchars( $club->memberFeeMessage(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_join', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/div>\n\t\t\t\t<div class='ipsColumn ipsColumn_narrow'>\n\t\t\t\t\t<a class=\"ipsButton ipsButton_medium ipsButton_fullWidth ipsButton_negative\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'leave')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_decline_invite', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<hr class='ipsHr'>\n    \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nelseif ( $memberStatus['status'] == \\IPS\\Member\\Club::STATUS_BANNED ):\n$return .= <<<CONTENT\n\n\t<div class='ipsBox ipsPad ipsSpacer_bottom'>\n\t\t<div class='ipsPhotoPanel ipsPhotoPanel_notPhone ipsPhotoPanel_tiny cClubStatus'>\n\t\t\t<i class='fa fa-times ipsPos_left ipsType_large'><\/i>\n\t\t\t<div>\n\t\t\t\t<h3 class='ipsType_reset ipsType_large'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_banned_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t<p class='ipsType_reset ipsType_medium'>\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_banned_desc', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/p>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n\nCONTENT;\n\nelseif ( in_array( $memberStatus['status'], array( \\IPS\\Member\\Club::STATUS_EXPIRED, \\IPS\\Member\\Club::STATUS_EXPIRED_MODERATOR ) ) ):\n$return .= <<<CONTENT\n\n\t<div class='ipsBox ipsPad ipsSpacer_bottom'>\n    \t<div class='ipsColumns ipsColumns_collapsePhone'>\n    \t\t<div class='ipsColumn ipsColumn_fluid'>\n\t\t\t\t<div class='ipsPhotoPanel ipsPhotoPanel_notPhone ipsPhotoPanel_tiny cClubStatus'>\n\t\t\t\t\t<i class='fa fa-exclamation-triangle ipsPos_left ipsType_large'><\/i>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3 class='ipsType_reset ipsType_large'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_expired_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t\t<p class='ipsType_reset ipsType_medium'>\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_expired_desc', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/p>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<div class='ipsColumn ipsColumn_medium'>\n\t\t\t\t<a class=\"ipsButton ipsButton_medium ipsButton_fullWidth ipsButton_positive\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'renew')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_renew_now', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/a>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n\t<hr class='ipsHr'>\n\nCONTENT;\n\nelseif ( !$club->canRead() ):\n$return .= <<<CONTENT\n\n\t<div class='ipsBox ipsPad ipsSpacer_bottom'>\n\t\t\nCONTENT;\n\nif ( $memberStatus['status'] === $club::STATUS_REQUESTED ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsPhotoPanel ipsPhotoPanel_notPhone ipsPhotoPanel_tiny cClubStatus'>\n\t\t\t\t<i class='fa fa-clock-o ipsPos_left ipsType_large'><\/i>\n\t\t\t\t<div>\n\t\t\t\t\t<h3 class='ipsType_reset ipsType_large'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_requested_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t<p class='ipsType_reset ipsType_medium'>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $club->isPaid() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_requested_desc_paid', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_requested_desc', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/p>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nelseif ( $memberStatus['status'] === $club::STATUS_WAITING_PAYMENT ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsColumns ipsColumns_collapsePhone'>\n\t    \t\t<div class='ipsColumn ipsColumn_fluid'>\n\t\t\t\t\t<div class='ipsPhotoPanel ipsPhotoPanel_notPhone ipsPhotoPanel_tiny cClubStatus'>\n\t\t\t\t\t\t<i class='fa fa-check ipsPos_left ipsType_large'><\/i>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3 class='ipsType_reset ipsType_large'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_awaiting_payment_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t\t\t<p class='ipsType_reset ipsType_medium'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_awaiting_payment_desc', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t<div class='ipsColumn ipsColumn_narrow'>\n\t\t\t\t\t<a class=\"ipsButton ipsButton_medium ipsButton_fullWidth ipsButton_positive\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'join')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_pay_membership_fee', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\t\t\t\n\t\t\nCONTENT;\n\nelseif ( $memberStatus['status'] === \\IPS\\Member\\Club::STATUS_DECLINED ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsPhotoPanel ipsPhotoPanel_notPhone ipsPhotoPanel_tiny cClubStatus'>\n\t\t\t\t<i class='fa fa-times ipsPos_left ipsType_large'><\/i>\n\t\t\t\t<div>\n\t\t\t\t\t<h3 class='ipsType_reset ipsType_large'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_denied_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t<p class='ipsType_reset ipsType_medium'>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_denied_desc', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/p>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsColumns ipsColumns_collapsePhone'>\n\t    \t\t<div class='ipsColumn ipsColumn_fluid'>\n\t\t\t\t\t<div class='ipsPhotoPanel ipsPhotoPanel_notPhone ipsPhotoPanel_tiny cClubStatus'>\n\t\t\t\t\t\t<i class='fa fa-lock ipsPos_left ipsType_large'><\/i>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3 class='ipsType_reset ipsType_large'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_closed_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t\t\t<p class='ipsType_reset ipsType_medium'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_closed_desc', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $club->about ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<h3 class='ipsType_minorHeading ipsSpacer_top'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_about_this_club', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t\t\t\t<div class='ipsType_richText ipsType_medium'>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $club->about, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t<div class='ipsColumn ipsColumn_narrow'>\n\t\t\t\t\t<a class=\"ipsButton ipsButton_medium ipsButton_fullWidth ipsButton_positive\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'join')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nif ( $club->isPaid() and $memberStatus['status'] !== $club::STATUS_INVITED_BYPASSING_PAYMENT ):\n$return .= <<<CONTENT\ndata-confirm data-confirmIcon=\"info\" data-confirmMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_membership_item', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-confirmSubmessage=\"\nCONTENT;\n$return .= htmlspecialchars( $club->memberFeeMessage(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_join', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction view( $club, $activity, $fieldValues ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( \\IPS\\Settings::i()->clubs_header != 'sidebar' ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->header( $club );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n<div class='ipsColumns ipsColumns_collapsePhone'>\n\t<section class='ipsColumn ipsColumn_fluid'>\n\t\n\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->clubs_require_approval and !$club->approved ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsBox ipsPad ipsSpacer_bottom ipsModerated'>\n\t\t\t\t<div class='ipsColumns ipsColumns_collapsePhone'>\n\t\t    \t\t<div class='ipsColumn ipsColumn_fluid'>\n\t\t\t\t\t\t<div class='ipsPhotoPanel ipsPhotoPanel_notPhone ipsPhotoPanel_tiny cClubStatus'>\n\t\t\t\t\t\t\t<i class='fa fa-eye-slash ipsPos_left ipsType_large'><\/i>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h3 class='ipsType_reset ipsType_large'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_unapproved', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t\t\t\t<p class='ipsType_reset ipsType_medium'>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_access_all_clubs') ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_unapproved_desc_mod', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_unapproved_desc_public', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_access_all_clubs') ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='ipsColumn ipsColumn_narrow'>\n\t\t\t\t\t\t\t<a class=\"ipsButton ipsButton_medium ipsButton_fullWidth ipsButton_positive\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'approve', 'approved' => 1 ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'approve', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class='ipsColumn ipsColumn_narrow'>\n\t\t\t\t\t\t\t<a class=\"ipsButton ipsButton_medium ipsButton_fullWidth ipsButton_negative\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString( array( 'do' => 'approve', 'approved' => 0 ) )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'delete', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\nCONTENT;\n\n$memberStatus = $club->memberStatus( \\IPS\\Member::loggedIn(), 2 );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->nonMemberClubStatus( $club, $memberStatus );\n$return .= <<<CONTENT\n\n\t\t\n\t\t\nCONTENT;\n\nif ( $club->canRead() ):\n$return .= <<<CONTENT\n\n\t\t\t<div class=\"ipsClearfix ipsSpacer_bottom\">\n\t\t\t\t<div class=\"ipsPos_right\">\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->follow( 'core','club', $club->id, $club->followerCount() );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\nCONTENT;\n\nif ( $club->about || ( $club->location() && \\IPS\\Settings::i()->clubs_locations && ( !\\IPS\\GeoLocation::enabled() ) ) || \\IPS\\Member\\Club\\CustomField::roots() ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsBox ipsPad ipsSpacer_bottom'>\n\t\t\t\t\nCONTENT;\n\nif ( $club->about ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_about_this_club', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t\t<div class='ipsType_richText ipsType_medium'>\n\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $club->about, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $club->location() && \\IPS\\Settings::i()->clubs_locations && ( !\\IPS\\GeoLocation::enabled() ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div class='\nCONTENT;\n\nif ( $club->about ):\n$return .= <<<CONTENT\nipsSpacer_top\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t<h3 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_location', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t\t<div class='ipsType_richText ipsType_medium'>\n\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $club->location(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<hr class='ipsHr'>\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member\\Club\\CustomField::roots() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nforeach ( \\IPS\\Member\\Club\\CustomField::roots() as $field ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( $fieldValues[ \"field_\" . $field->id ] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<div class='ipsSpacer_bottom'>\n\t\t\t\t\t\t\t\t<h3 class='ipsType_minorHeading'>\nCONTENT;\n$return .= htmlspecialchars( $field->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t\t\t\t<div class='ipsType_richText ipsType_medium'>\n\t\t\t\t\t\t\t\t\t{$field->displayValue( $fieldValues[ \"field_\" . $field->id ] )}\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\nCONTENT;\n\nif ( $club->isLeader() and $club->type === $club::TYPE_CLOSED and $pendingMembers = $club->members( array( $club::STATUS_REQUESTED ), NULL, NULL, 3 ) and count( $pendingMembers ) ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsBox ipsSpacer_bottom'>\n\t\t\t\t<h2 class='ipsType_sectionTitle ipsType_reset ipsType_medium'><i class='fa fa-lock' data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_requested_users_desc', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_requested_users', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t<div data-controller='core.front.clubs.requests'>\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \\IPS\\Request::i()->app )->membersRows( $club, $pendingMembers );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<hr class='ipsHr'>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\nCONTENT;\n\nif ( $club->canRead() ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsBox_alt'>\n\t\t\t\t<ol class=\"ipsStream ipsStream_withTimeline ipsList_reset ipsSpacer_top\">\n\t\t\t\t\t<li class='ipsStreamItem_time'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_whats_new', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $activity as $result ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $result !== NULL ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t{$result->html()}\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class='ipsStreamItem_terminator'>&nbsp;<\/li>\n\t\t\t\t<\/ol>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/section>\n\t\nCONTENT;\n\nif ( ( \\IPS\\GeoLocation::enabled() and \\IPS\\Settings::i()->clubs_locations and $location = $club->location() ) or ( $club->type != $club::TYPE_PUBLIC ) ):\n$return .= <<<CONTENT\n\n\t\t<aside class='ipsColumn ipsColumn_wide'>\n\t\t\t\nCONTENT;\n\nif ( \\IPS\\GeoLocation::enabled() and \\IPS\\Settings::i()->clubs_locations and $location ):\n$return .= <<<CONTENT\n\n\t\t\t\t<div class='ipsBox ipsPad_half ipsSpacer_bottom'>\n\t\t\t\t\t{$location->map()->render( 500, 300 )}\n\t\t\t\t\t<h3 class='ipsType_minorHeading ipsSpacer_top'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_location', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t<div class='ipsType_richText ipsType_medium'>\n\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $location, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\n\t\t\t\nCONTENT;\n\nif ( $club->type != $club::TYPE_PUBLIC ):\n$return .= <<<CONTENT\n\n\t\t\t\t<div class=\"ipsWidget ipsWidget_vertical ipsBox\">\n\t\t\t\t\t<h2 class='ipsWidget_title ipsType_reset'>\nCONTENT;\n\n$pluralize = array( $club->members ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_members_count', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t<div class='ipsWidget_inner'>\n\t\t\t\t\t\t<ol class='ipsDataList ipsDataList_reducedSpacing'>\n\t\t\t\t\t\t\t\nCONTENT;\n\n$membersToShow = $club->members( array('member', 'moderator', 'leader'), 15, \"IF(core_clubs_memberships.status='leader' OR core_clubs_memberships.status='moderator',0,1), core_clubs_memberships.joined ASC\", 1);\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $membersToShow as $memberData ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$member = \\IPS\\Member::constructFromData( $memberData['core_members'] );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class='ipsDataItem ipsClearfix'>\n\t\t\t\t\t\t\t\t\t<div class='ipsDataItem_icon ipsPos_top'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $member, 'mini' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t\t\t\t\t\t\t<h3 class='ipsType_sectionHead ipsType_normal'>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userLink( $member );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<\/h3>\n\t\t\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $memberData['core_clubs_memberships']['status'] == \\IPS\\Member\\Club::STATUS_LEADER && ( $club->owner and $club->owner == $member )  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<br><span class=\"ipsBadge ipsBadge_positive\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_owner', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelseif ( $memberData['core_clubs_memberships']['status'] == \\IPS\\Member\\Club::STATUS_LEADER ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<br><span class=\"ipsBadge ipsBadge_positive\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_leader', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelseif ( in_array( $memberData['core_clubs_memberships']['status'], array( \\IPS\\Member\\Club::STATUS_MODERATOR, \\IPS\\Member\\Club::STATUS_EXPIRED_MODERATOR ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<br><span class=\"ipsBadge ipsBadge_intermediary\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_moderator', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\n\t\t\t\t\t\t\t\t\t\t<p class='ipsType_reset ipsType_light ipsType_medium'>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array(\\IPS\\DateTime::ts( $memberData['core_clubs_memberships']['joined'] )->relative( \\IPS\\DateTime::RELATIVE_FORMAT_LOWER )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_joined', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/li>\t\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/ol>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $club->members > count( $membersToShow\t) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<div class='ipsType_center ipsType_medium ipsPad_half ipsType_blendLinks'>\n\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $club->url()->setQueryString('do', 'members'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'club_see_all_members', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-angle-right'><\/i><\/a>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/aside>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}}"
VALUE;
